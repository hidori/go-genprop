# 技術判断記録

## Decision Record (DR) フォーマット

Decision Recordは、プロジェクトにおける重要な技術的意思決定を記録するための文書形式である。
以下のフォーマットに従って記録する。

### フォーマット

```markdown
## 経緯
[意思決定が必要になった背景や状況を説明]

## 結論
[最終的な決定内容を簡潔に記述]

## 検討内容
[検討した選択肢や代替案を箇条書きで記述]
- **選択肢A**: [説明]
- **選択肢B**: [説明]

## 決定理由
[なぜその結論に至ったかの詳細な理由を説明]

## 参考
[参考にした資料やドキュメント、既存コードへの言及]
- [参考資料1]
- [参考資料2]
```

### 実例

以下は実際のDecision Recordの例です（issue #39より）：

```markdown
## 経緯
`internal/app/formatter/` パッケージの命名について、`writer/` の方が適切ではないかという議論が発生。

## 結論
Go標準ライブラリとの一貫性を保つため、`formatter`パッケージ名を維持する。

## 検討内容
- **writer**: 出力書き込み全般を連想させる名前
- **formatter**: フォーマット処理のみを連想させる名前

## 決定理由
Go標準ライブラリの`fmt`パッケージと同様に、フォーマットと出力の両方の責務を持つパッケージが存在する。
- `fmt.Printf()`, `fmt.Sprintf()`: フォーマット処理
- `fmt.Print()`, `fmt.Println()`: 出力処理
- `fmt.Fprint()`, `fmt.Fprintf()`: 書き込み処理

現在のformatterパッケージも同様に：
- フォーマット処理（`go/format`による整形）
- 出力処理（`io.Writer`への書き込み）
- インポート処理（`golang.org/x/tools/imports`による最適化）

を担当している。

## 参考
- Go標準ライブラリ `fmt` パッケージ
- 既存コード: `internal/app/formatter/formatter.go`
```

### 運用ガイドライン

1. **Decision Recordの作成タイミング**
   - アーキテクチャの変更
   - パッケージ構造の変更
   - 技術選定
   - 命名規則の決定

2. **GitHubでの管理**
   - issueとして作成
   - `decision-record` ラベルを付与
   - タイトルに `[Decision Record]` プレフィックスを付与

3. **記録の粒度**
   - 重要な技術的判断のみを記録
   - 日常的なコーディング判断は含めない
   - 将来の開発者が理解できるレベルの詳細度を保つ
