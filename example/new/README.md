# Constructor Generation Example

This example demonstrates automatic constructor generation with the `-new-func` option.

## Files

- `models.go` - Struct definition for constructor generation
- `models_prop.go` - Generated property methods and constructor (auto-generated)
- `../cmd/example/new/main.go` - Usage example

## Features Demonstrated

- Automatic `NewUser` constructor generation
- Constructor with all settable fields as parameters
- Standard getter/setter generation
- Clean initialization pattern

## Struct Definition

```go
package example

// User represents a user model for new function generation.
type User struct {
    id    int    `property:"get"`     // Read-only ID field
    name  string `property:"get,set"` // Name with both getter and setter
    email string `property:"get,set"` // Email with both getter and setter
}
```

## Code Generation

```bash
go tool genprop -new-func models.go > models_prop.go
```

## Generated Output

```go
// Code generated by github.com/hidori/go-genprop/cmd/genprop DO NOT EDIT.
package example

func NewUser(id int, name string, email string) *User {
    s := &User{}
    s.id = id
    s.SetName(name)
    s.SetEmail(email)
    return s
}
func (t *User) GetID() int {
    return t.id
}
func (t *User) GetName() string {
    return t.name
}
func (t *User) SetName(v string) {
    t.name = v
}
func (t *User) GetEmail() string {
    return t.email
}
func (t *User) SetEmail(v string) {
    t.email = v
}
```

## Usage Example

```go
// Create a new user using the generated constructor
user := example.NewUser(1, "John Doe", "john@example.com")

// Access values using getters
fmt.Printf("User ID: %d\n", user.GetID())     // Output: User ID: 1
fmt.Printf("User Name: %s\n", user.GetName()) // Output: User Name: John Doe
fmt.Printf("User Email: %s\n", user.GetEmail()) // Output: User Email: john@example.com

// Update values using setters
user.SetName("Jane Smith")
user.SetEmail("jane@example.com")
fmt.Printf("Updated Name: %s\n", user.GetName())   // Output: Updated Name: Jane Smith
fmt.Printf("Updated Email: %s\n", user.GetEmail()) // Output: Updated Email: jane@example.com
```

## Constructor Behavior

- **Parameters**: All fields with setters (including `property:"get,set"` and `property:"set"`)
- **Parameter Order**: Fields appear in declaration order
- **Read-only Fields**: Fields with only `property:"get"` are set directly
- **Settable Fields**: Fields with setters use the generated setter methods
- **Return Type**: Always returns a pointer to the struct

## Key Points

- Constructor automatically handles field initialization
- Uses generated setters for proper encapsulation
- No manual constructor implementation needed
- Clean, consistent initialization pattern
